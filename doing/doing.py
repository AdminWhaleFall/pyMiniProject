import requests
from http_Proxy import get_proxy
# print(get_proxy("http",10))

proxies = ['205.185.116.235:8080', '27.208.27.186:8060', '203.99.133.29:80', '119.28.233.135:8080', '8.210.249.129:3128', '205.185.115.100:8080', '51.159.93.12:5836', '116.197.130.66:80', '117.84.155.112:8118', '219.85.138.43:80', '105.27.238.163:80', '58.96.153.138:8080', '8.208.88.202:80', '203.202.245.58:80', '218.66.253.144:8800', '185.184.243.197:5836', '103.122.98.13:8080', '101.4.136.34:81', '80.241.222.138:80', '117.211.160.52:55443', '105.27.238.167:80', '47.115.63.52:8888', '1.2.183.55:8080', '105.27.237.28:80', '203.21.76.2:8080', '218.66.253.146:8800', '118.25.13.185:3128', '182.72.150.242:8080', '51.77.229.110:3128', '1.20.103.196:42792', '105.27.237.27:80', '14.115.107.24:808', '196.52.65.100:80', '105.27.238.161:80', '168.228.150.5:47507', '122.234.168.96:8060', '196.52.80.140:80', '183.88.46.230:8080', '217.195.203.27:3128', '196.52.58.53:80', '58.220.95.34:10174', '118.27.18.60:8081', '203.19.88.59:80', '191.235.96.205:80', '176.9.63.62:3128', '82.124.211.87:3128', '196.52.80.72:80', '139.99.88.26:8080', '178.33.251.230:3129', '110.44.128.200:3128', '139.99.102.114:80', '124.158.177.171:23500', '116.197.129.243:37822', '5.252.192.100:5836', '103.87.169.160:52308', '105.27.237.30:80', '221.180.170.104:8080', '105.27.238.160:80', '36.90.45.111:10081', '165.22.36.75:8888', '51.79.165.33:8080', '211.137.52.159:8080', '8.210.194.45:80', '14.207.129.148:8080', '183.88.41.154:8080', '58.147.170.114:8085', '1.197.204.100:9999', '182.48.79.85:8080', '177.244.36.206:8080', '5.252.192.98:5836', '173.82.17.188:5836']


for proxy in proxies:
    print("当前ip",proxy)
    proxyG={
        "http":'http://'+proxy
    }

    try:
        resp = requests.get("http://pv.sohu.com/cityjson?ie=utf-8", proxies=proxyG,timeout=10)
        print(resp.text)

    except Exception as e:
        print(proxy,"ip验证失败")
        proxies.remove(proxy)
    print("-----------------------------------")

print(proxies)
with open(r"C:\Users\Administrator\Desktop\airtech-python_free_ip_agent-master\python_free_ip_agent\proxy-ip.txt","a") as f:
    f.write(str(proxies))